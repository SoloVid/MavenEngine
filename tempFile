//Maven Un-Scene Setup file
var GAMEID = "0"; //For save/load

console.log("initialize");

function startUp()
{
	SLVDEngine.audioPlay("Maven_Theme.mp3");
	SLVDEngine.SLVDEngine.showImage(SLVDEngine.image["FreedanStudioswweb.jpg"], 1, false).then(function() {
		return SLVDEngine.SLVDEngine.showImage(SLVDEngine.image["SoloVid2.png"], 1, false);
	}).then(function() {
		var opMenu = new SLVDEngine.SLVDEngine.menu();
		//opMenu.killPoints();
		opMenu.cursor = SLVDEngine.image["torchCursor.png"];
		opMenu.background = SLVDEngine.image["openingMenu.png"];
		opMenu.addPoint(212, 185);
		opMenu.addPoint(212, 245);
		opMenu.addPoint(212, 305);
		return opMenu.runMenu();		
	}).then(function(menuChoice) {
		switch(menuChoice)
		{
			case 0: //New Game
			{
				SLVDEngine.currentPlayer = 0;
				SLVDEngine.send("perform_test", 32, 32, 0);
				return;
			}
			case 1: //Load Game
			{
				var opMenu = SLVDEngine.setupFileSelect(); //In menuFunctions.js					
				return opMenu.runMenu();
			}
			case 2: //Credits
			{
				return SLVDEngine.SLVDEngine.showImage(SLVDEngine.image["credits.png"], 2, true);
			}
		}	
	});
}
console.log("about to set Sprites");

/*SLVDEngine.SLVDEngine.player["Kale"] = SLVDEngine.SLVDEngine.evalObj("Kale");
SLVDEngine.SLVDEngine.player[0] = SLVDEngine.SLVDEngine.player["Kale"];

console.log("initialized Kale");*/

/*SLVDEngine.SLVDEngine.player["Guyver"] = SLVDEngine.evalObj(getTXT("files/templates/Guyver.txt"));
SLVDEngine.SLVDEngine.player[1] = SLVDEngine.SLVDEngine.player["Guyver"];

SLVDEngine.SLVDEngine.player["Cleopas"] = SLVDEngine.evalObj(getTXT("files/templates/Cleopas.txt"));
SLVDEngine.SLVDEngine.player[2] = SLVDEngine.SLVDEngine.player["Cleopas"];*/

SLVDEngine.SLVDEngine.player["Sasha"] = SLVDEngine.SLVDEngine.evalObj("Sasha");
SLVDEngine.SLVDEngine.player.push(SLVDEngine.SLVDEngine.player["Sasha"]);

/*SLVDEngine.SLVDEngine.player["Snake"] = new SLVDEngine.SLVDEngine.Sprite("Snake", SLVDEngine.image["snake.png"]);
//SLVDEngine.SLVDEngine.player[4] = SLVDEngine.SLVDEngine.player["Snake"];
SLVDEngine.SLVDEngine.player["Snake"].x = 300;
SLVDEngine.SLVDEngine.player["Snake"].y = 350;
SLVDEngine.SLVDEngine.player["Snake"].onHit = 0;
SLVDEngine.SLVDEngine.player["Snake"].hp = null;
SLVDEngine.SLVDEngine.player["Snake"].strg = 1;
SLVDEngine.SLVDEngine.player["Snake"].spd = 7;
SLVDEngine.SLVDEngine.player["Snake"].yres = 32;*/

function die(cue) //Specific end of game for "Maven: The Un-scene."
{
	switch(cue)
	{
		case 0:
		case 1:
		{
			SLVDEngine.personSays(SLVDEngine.SLVDEngine.player[SLVDEngine.currentPlayer], "I'm dying.");
			SLVDEngine.process = "wait";
			return 2;
		}
		case 2:
		{
			SLVDEngine.personSays(SLVDEngine.SLVDEngine.player[SLVDEngine.currentPlayer], "No...", "Guyver");
			return 3;
		}
		case 3:
		{
			SLVDEngine.personSays(SLVDEngine.SLVDEngine.player[SLVDEngine.currentPlayer], "It can't end this way! What about the others? Maven was supposed to be the answer!", "Sasha");
			return 4;
		}
		case 4:
		{
			location.reload();
		}
		default: { };
	}
}